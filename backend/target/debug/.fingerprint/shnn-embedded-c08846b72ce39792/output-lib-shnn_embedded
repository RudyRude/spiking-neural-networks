{"$message_type":"diagnostic","message":"unused imports: `EmbeddedError` and `EmbeddedResult`","code":{"code":"unused_imports","explanation":null},"level":"warning","spans":[{"file_name":"crates/shnn-embedded/src/fixed_point.rs","byte_start":286,"byte_end":299,"line_start":7,"line_end":7,"column_start":20,"column_end":33,"is_primary":true,"text":[{"text":"use crate::error::{EmbeddedError, EmbeddedResult};","highlight_start":20,"highlight_end":33}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"crates/shnn-embedded/src/fixed_point.rs","byte_start":301,"byte_end":315,"line_start":7,"line_end":7,"column_start":35,"column_end":49,"is_primary":true,"text":[{"text":"use crate::error::{EmbeddedError, EmbeddedResult};","highlight_start":35,"highlight_end":49}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}],"children":[{"message":"`#[warn(unused_imports)]` (part of `#[warn(unused)]`) on by default","code":null,"level":"note","spans":[],"children":[],"rendered":null},{"message":"remove the whole `use` item","code":null,"level":"help","spans":[{"file_name":"crates/shnn-embedded/src/fixed_point.rs","byte_start":267,"byte_end":318,"line_start":7,"line_end":8,"column_start":1,"column_end":1,"is_primary":true,"text":[{"text":"use crate::error::{EmbeddedError, EmbeddedResult};","highlight_start":1,"highlight_end":51},{"text":"use core::{fmt, ops};","highlight_start":1,"highlight_end":1}],"label":null,"suggested_replacement":"","suggestion_applicability":"MachineApplicable","expansion":null}],"children":[],"rendered":null}],"rendered":"\u001b[1m\u001b[33mwarning\u001b[0m\u001b[1m: unused imports: `EmbeddedError` and `EmbeddedResult`\u001b[0m\n \u001b[1m\u001b[94m--> \u001b[0mcrates/shnn-embedded/src/fixed_point.rs:7:20\n  \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[94m7\u001b[0m \u001b[1m\u001b[94m|\u001b[0m use crate::error::{EmbeddedError, EmbeddedResult};\n  \u001b[1m\u001b[94m|\u001b[0m                    \u001b[1m\u001b[33m^^^^^^^^^^^^^\u001b[0m  \u001b[1m\u001b[33m^^^^^^^^^^^^^^\u001b[0m\n  \u001b[1m\u001b[94m|\u001b[0m\n  \u001b[1m\u001b[94m= \u001b[0m\u001b[1mnote\u001b[0m: `#[warn(unused_imports)]` (part of `#[warn(unused)]`) on by default\n\n"}
{"$message_type":"diagnostic","message":"unused import: `Q16_16`","code":{"code":"unused_imports","explanation":null},"level":"warning","spans":[{"file_name":"crates/shnn-embedded/src/embedded_neuron.rs","byte_start":316,"byte_end":322,"line_start":8,"line_end":8,"column_start":31,"column_end":37,"is_primary":true,"text":[{"text":"    fixed_point::{FixedPoint, Q16_16, FixedSpike},","highlight_start":31,"highlight_end":37}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}],"children":[{"message":"remove the unused import","code":null,"level":"help","spans":[{"file_name":"crates/shnn-embedded/src/embedded_neuron.rs","byte_start":314,"byte_end":322,"line_start":8,"line_end":8,"column_start":29,"column_end":37,"is_primary":true,"text":[{"text":"    fixed_point::{FixedPoint, Q16_16, FixedSpike},","highlight_start":29,"highlight_end":37}],"label":null,"suggested_replacement":"","suggestion_applicability":"MachineApplicable","expansion":null}],"children":[],"rendered":null}],"rendered":"\u001b[1m\u001b[33mwarning\u001b[0m\u001b[1m: unused import: `Q16_16`\u001b[0m\n \u001b[1m\u001b[94m--> \u001b[0mcrates/shnn-embedded/src/embedded_neuron.rs:8:31\n  \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[94m8\u001b[0m \u001b[1m\u001b[94m|\u001b[0m     fixed_point::{FixedPoint, Q16_16, FixedSpike},\n  \u001b[1m\u001b[94m|\u001b[0m                               \u001b[1m\u001b[33m^^^^^^\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"unused import: `Q16_16`","code":{"code":"unused_imports","explanation":null},"level":"warning","spans":[{"file_name":"crates/shnn-embedded/src/embedded_network.rs","byte_start":290,"byte_end":296,"line_start":8,"line_end":8,"column_start":31,"column_end":37,"is_primary":true,"text":[{"text":"    fixed_point::{FixedPoint, Q16_16, FixedSpike},","highlight_start":31,"highlight_end":37}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}],"children":[{"message":"remove the unused import","code":null,"level":"help","spans":[{"file_name":"crates/shnn-embedded/src/embedded_network.rs","byte_start":288,"byte_end":296,"line_start":8,"line_end":8,"column_start":29,"column_end":37,"is_primary":true,"text":[{"text":"    fixed_point::{FixedPoint, Q16_16, FixedSpike},","highlight_start":29,"highlight_end":37}],"label":null,"suggested_replacement":"","suggestion_applicability":"MachineApplicable","expansion":null}],"children":[],"rendered":null}],"rendered":"\u001b[1m\u001b[33mwarning\u001b[0m\u001b[1m: unused import: `Q16_16`\u001b[0m\n \u001b[1m\u001b[94m--> \u001b[0mcrates/shnn-embedded/src/embedded_network.rs:8:31\n  \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[94m8\u001b[0m \u001b[1m\u001b[94m|\u001b[0m     fixed_point::{FixedPoint, Q16_16, FixedSpike},\n  \u001b[1m\u001b[94m|\u001b[0m                               \u001b[1m\u001b[33m^^^^^^\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"unused import: `FnvIndexMap`","code":{"code":"unused_imports","explanation":null},"level":"warning","spans":[{"file_name":"crates/shnn-embedded/src/embedded_network.rs","byte_start":499,"byte_end":510,"line_start":12,"line_end":12,"column_start":21,"column_end":32,"is_primary":true,"text":[{"text":"use heapless::{Vec, FnvIndexMap, Deque};","highlight_start":21,"highlight_end":32}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}],"children":[{"message":"remove the unused import","code":null,"level":"help","spans":[{"file_name":"crates/shnn-embedded/src/embedded_network.rs","byte_start":497,"byte_end":510,"line_start":12,"line_end":12,"column_start":19,"column_end":32,"is_primary":true,"text":[{"text":"use heapless::{Vec, FnvIndexMap, Deque};","highlight_start":19,"highlight_end":32}],"label":null,"suggested_replacement":"","suggestion_applicability":"MachineApplicable","expansion":null}],"children":[],"rendered":null}],"rendered":"\u001b[1m\u001b[33mwarning\u001b[0m\u001b[1m: unused import: `FnvIndexMap`\u001b[0m\n  \u001b[1m\u001b[94m--> \u001b[0mcrates/shnn-embedded/src/embedded_network.rs:12:21\n   \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[94m12\u001b[0m \u001b[1m\u001b[94m|\u001b[0m use heapless::{Vec, FnvIndexMap, Deque};\n   \u001b[1m\u001b[94m|\u001b[0m                     \u001b[1m\u001b[33m^^^^^^^^^^^\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"unused import: `Q16_16`","code":{"code":"unused_imports","explanation":null},"level":"warning","spans":[{"file_name":"crates/shnn-embedded/src/embedded_memory.rs","byte_start":344,"byte_end":350,"line_start":9,"line_end":9,"column_start":31,"column_end":37,"is_primary":true,"text":[{"text":"    fixed_point::{FixedPoint, Q16_16, FixedSpike},","highlight_start":31,"highlight_end":37}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}],"children":[{"message":"remove the unused import","code":null,"level":"help","spans":[{"file_name":"crates/shnn-embedded/src/embedded_memory.rs","byte_start":342,"byte_end":350,"line_start":9,"line_end":9,"column_start":29,"column_end":37,"is_primary":true,"text":[{"text":"    fixed_point::{FixedPoint, Q16_16, FixedSpike},","highlight_start":29,"highlight_end":37}],"label":null,"suggested_replacement":"","suggestion_applicability":"MachineApplicable","expansion":null}],"children":[],"rendered":null}],"rendered":"\u001b[1m\u001b[33mwarning\u001b[0m\u001b[1m: unused import: `Q16_16`\u001b[0m\n \u001b[1m\u001b[94m--> \u001b[0mcrates/shnn-embedded/src/embedded_memory.rs:9:31\n  \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[94m9\u001b[0m \u001b[1m\u001b[94m|\u001b[0m     fixed_point::{FixedPoint, Q16_16, FixedSpike},\n  \u001b[1m\u001b[94m|\u001b[0m                               \u001b[1m\u001b[33m^^^^^^\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"unused import: `Deque`","code":{"code":"unused_imports","explanation":null},"level":"warning","spans":[{"file_name":"crates/shnn-embedded/src/embedded_memory.rs","byte_start":401,"byte_end":406,"line_start":11,"line_end":11,"column_start":34,"column_end":39,"is_primary":true,"text":[{"text":"use heapless::{Vec, FnvIndexMap, Deque};","highlight_start":34,"highlight_end":39}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}],"children":[{"message":"remove the unused import","code":null,"level":"help","spans":[{"file_name":"crates/shnn-embedded/src/embedded_memory.rs","byte_start":399,"byte_end":406,"line_start":11,"line_end":11,"column_start":32,"column_end":39,"is_primary":true,"text":[{"text":"use heapless::{Vec, FnvIndexMap, Deque};","highlight_start":32,"highlight_end":39}],"label":null,"suggested_replacement":"","suggestion_applicability":"MachineApplicable","expansion":null}],"children":[],"rendered":null}],"rendered":"\u001b[1m\u001b[33mwarning\u001b[0m\u001b[1m: unused import: `Deque`\u001b[0m\n  \u001b[1m\u001b[94m--> \u001b[0mcrates/shnn-embedded/src/embedded_memory.rs:11:34\n   \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[94m11\u001b[0m \u001b[1m\u001b[94m|\u001b[0m use heapless::{Vec, FnvIndexMap, Deque};\n   \u001b[1m\u001b[94m|\u001b[0m                                  \u001b[1m\u001b[33m^^^^^\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"unused imports: `EmbeddedError` and `Q16_16`","code":{"code":"unused_imports","explanation":null},"level":"warning","spans":[{"file_name":"crates/shnn-embedded/src/hal.rs","byte_start":277,"byte_end":290,"line_start":7,"line_end":7,"column_start":13,"column_end":26,"is_primary":true,"text":[{"text":"    error::{EmbeddedError, EmbeddedResult},","highlight_start":13,"highlight_end":26}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"crates/shnn-embedded/src/hal.rs","byte_start":339,"byte_end":345,"line_start":8,"line_end":8,"column_start":31,"column_end":37,"is_primary":true,"text":[{"text":"    fixed_point::{FixedPoint, Q16_16, FixedSpike},","highlight_start":31,"highlight_end":37}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}],"children":[{"message":"remove the unused imports","code":null,"level":"help","spans":[{"file_name":"crates/shnn-embedded/src/hal.rs","byte_start":277,"byte_end":292,"line_start":7,"line_end":7,"column_start":13,"column_end":28,"is_primary":true,"text":[{"text":"    error::{EmbeddedError, EmbeddedResult},","highlight_start":13,"highlight_end":28}],"label":null,"suggested_replacement":"","suggestion_applicability":"MachineApplicable","expansion":null},{"file_name":"crates/shnn-embedded/src/hal.rs","byte_start":276,"byte_end":277,"line_start":7,"line_end":7,"column_start":12,"column_end":13,"is_primary":true,"text":[{"text":"    error::{EmbeddedError, EmbeddedResult},","highlight_start":12,"highlight_end":13}],"label":null,"suggested_replacement":"","suggestion_applicability":"MachineApplicable","expansion":null},{"file_name":"crates/shnn-embedded/src/hal.rs","byte_start":306,"byte_end":307,"line_start":7,"line_end":7,"column_start":42,"column_end":43,"is_primary":true,"text":[{"text":"    error::{EmbeddedError, EmbeddedResult},","highlight_start":42,"highlight_end":43}],"label":null,"suggested_replacement":"","suggestion_applicability":"MachineApplicable","expansion":null},{"file_name":"crates/shnn-embedded/src/hal.rs","byte_start":337,"byte_end":345,"line_start":8,"line_end":8,"column_start":29,"column_end":37,"is_primary":true,"text":[{"text":"    fixed_point::{FixedPoint, Q16_16, FixedSpike},","highlight_start":29,"highlight_end":37}],"label":null,"suggested_replacement":"","suggestion_applicability":"MachineApplicable","expansion":null}],"children":[],"rendered":null}],"rendered":"\u001b[1m\u001b[33mwarning\u001b[0m\u001b[1m: unused imports: `EmbeddedError` and `Q16_16`\u001b[0m\n \u001b[1m\u001b[94m--> \u001b[0mcrates/shnn-embedded/src/hal.rs:7:13\n  \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[94m7\u001b[0m \u001b[1m\u001b[94m|\u001b[0m     error::{EmbeddedError, EmbeddedResult},\n  \u001b[1m\u001b[94m|\u001b[0m             \u001b[1m\u001b[33m^^^^^^^^^^^^^\u001b[0m\n\u001b[1m\u001b[94m8\u001b[0m \u001b[1m\u001b[94m|\u001b[0m     fixed_point::{FixedPoint, Q16_16, FixedSpike},\n  \u001b[1m\u001b[94m|\u001b[0m                               \u001b[1m\u001b[33m^^^^^^\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"cannot borrow `self.synapses` as immutable because it is also borrowed as mutable","code":{"code":"E0502","explanation":"A variable already borrowed with a certain mutability (either mutable or\nimmutable) was borrowed again with a different mutability.\n\nErroneous code example:\n\n```compile_fail,E0502\nfn bar(x: &mut i32) {}\nfn foo(a: &mut i32) {\n    let y = &a; // a is borrowed as immutable.\n    bar(a); // error: cannot borrow `*a` as mutable because `a` is also borrowed\n            //        as immutable\n    println!(\"{}\", y);\n}\n```\n\nTo fix this error, ensure that you don't have any other references to the\nvariable before trying to access it with a different mutability:\n\n```\nfn bar(x: &mut i32) {}\nfn foo(a: &mut i32) {\n    bar(a);\n    let y = &a; // ok!\n    println!(\"{}\", y);\n}\n```\n\nFor more information on Rust's ownership system, take a look at the\n[References & Borrowing][references-and-borrowing] section of the Book.\n\n[references-and-borrowing]: https://doc.rust-lang.org/book/ch04-02-references-and-borrowing.html\n"},"level":"error","spans":[{"file_name":"crates/shnn-embedded/src/embedded_network.rs","byte_start":19719,"byte_end":19732,"line_start":458,"line_end":458,"column_start":67,"column_end":80,"is_primary":true,"text":[{"text":"                                            for (syn_idx, syn) in self.synapses.iter().enumerate() {","highlight_start":67,"highlight_end":80}],"label":"immutable borrow occurs here","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"crates/shnn-embedded/src/embedded_network.rs","byte_start":14913,"byte_end":14931,"line_start":397,"line_end":397,"column_start":44,"column_end":62,"is_primary":false,"text":[{"text":"                            for synapse in &mut self.synapses {","highlight_start":44,"highlight_end":62}],"label":"mutable borrow occurs here","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"crates/shnn-embedded/src/embedded_network.rs","byte_start":14913,"byte_end":14931,"line_start":397,"line_end":397,"column_start":44,"column_end":62,"is_primary":false,"text":[{"text":"                            for synapse in &mut self.synapses {","highlight_start":44,"highlight_end":62}],"label":"mutable borrow later used here","suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"crates/shnn-embedded/src/embedded_network.rs","byte_start":14898,"byte_end":20368,"line_start":397,"line_end":468,"column_start":29,"column_end":30,"is_primary":false,"text":[{"text":"                            for synapse in &mut self.synapses {","highlight_start":29,"highlight_end":64},{"text":"                                if synapse.pre_id == spike.source {","highlight_start":1,"highlight_end":68},{"text":"                                    #[cfg(feature = \"partitioning\")]","highlight_start":1,"highlight_end":69},{"text":"                                    {","highlight_start":1,"highlight_end":38},{"text":"                                        let pid_pre = self.partition_map.get(spike.source);","highlight_start":1,"highlight_end":92},{"text":"                                        let pid_post = self.partition_map.get(synapse.post_id);","highlight_start":1,"highlight_end":96},{"text":"                                        match (pid_pre, pid_post) {","highlight_start":1,"highlight_end":68},{"text":"                                            // Same-partition: deliver immediately","highlight_start":1,"highlight_end":83},{"text":"                                            (Some(a), Some(b)) if a == b => {","highlight_start":1,"highlight_end":78},{"text":"                                                synapse.receive_spike(&spike)?;","highlight_start":1,"highlight_end":80},{"text":"                                                if self.plastic_enable {","highlight_start":1,"highlight_end":73},{"text":"                                                    // Update pre-synaptic trace on spike","highlight_start":1,"highlight_end":90},{"text":"                                                    let pre_idx = spike.source as usize;","highlight_start":1,"highlight_end":89},{"text":"                                                    if pre_idx < self.pre_trace.len() {","highlight_start":1,"highlight_end":88},{"text":"                                                        self.pre_trace[pre_idx] = self.pre_trace[pre_idx] + T::one();","highlight_start":1,"highlight_end":118},{"text":"                                                    }","highlight_start":1,"highlight_end":54},{"text":"                                                    // Apply STDP: find synapse index and update weight","highlight_start":1,"highlight_end":104},{"text":"                                                    for (syn_idx, syn) in self.synapses.iter().enumerate() {","highlight_start":1,"highlight_end":109},{"text":"                                                        if syn.pre_id == spike.source && syn.post_id == synapse.post_id {","highlight_start":1,"highlight_end":122},{"text":"                                                            self.apply_stdp(spike.source, synapse.post_id, syn_idx);","highlight_start":1,"highlight_end":117},{"text":"                                                            break;","highlight_start":1,"highlight_end":67},{"text":"                                                        }","highlight_start":1,"highlight_end":58},{"text":"                                                    }","highlight_start":1,"highlight_end":54},{"text":"                                                }","highlight_start":1,"highlight_end":50},{"text":"                                                let _ = self.active_list.push_back(synapse.post_id);","highlight_start":1,"highlight_end":101},{"text":"                                            }","highlight_start":1,"highlight_end":46},{"text":"                                            // Cross-partition: defer by enqueuing into destination partition","highlight_start":1,"highlight_end":110},{"text":"                                            (.., Some(dst)) => {","highlight_start":1,"highlight_end":65},{"text":"                                                let _ = self.partition_spikes.push(dst, spike);","highlight_start":1,"highlight_end":96},{"text":"                                            }","highlight_start":1,"highlight_end":46},{"text":"                                            // Unknown mapping: fallback to immediate delivery","highlight_start":1,"highlight_end":95},{"text":"                                            _ => {","highlight_start":1,"highlight_end":51},{"text":"                                                synapse.receive_spike(&spike)?;","highlight_start":1,"highlight_end":80},{"text":"                                                if self.plastic_enable {","highlight_start":1,"highlight_end":73},{"text":"                                                    // Update pre-synaptic trace on spike","highlight_start":1,"highlight_end":90},{"text":"                                                    let pre_idx = spike.source as usize;","highlight_start":1,"highlight_end":89},{"text":"                                                    if pre_idx < self.pre_trace.len() {","highlight_start":1,"highlight_end":88},{"text":"                                                        self.pre_trace[pre_idx] = self.pre_trace[pre_idx] + T::one();","highlight_start":1,"highlight_end":118},{"text":"                                                    }","highlight_start":1,"highlight_end":54},{"text":"                                                    // Apply STDP: find synapse index and update weight","highlight_start":1,"highlight_end":104},{"text":"                                                    for (syn_idx, syn) in self.synapses.iter().enumerate() {","highlight_start":1,"highlight_end":109},{"text":"                                                        if syn.pre_id == spike.source && syn.post_id == synapse.post_id {","highlight_start":1,"highlight_end":122},{"text":"                                                            self.apply_stdp(spike.source, synapse.post_id, syn_idx);","highlight_start":1,"highlight_end":117},{"text":"                                                            break;","highlight_start":1,"highlight_end":67},{"text":"                                                        }","highlight_start":1,"highlight_end":58},{"text":"                                                    }","highlight_start":1,"highlight_end":54},{"text":"                                                }","highlight_start":1,"highlight_end":50},{"text":"                                                let _ = self.active_list.push_back(synapse.post_id);","highlight_start":1,"highlight_end":101},{"text":"                                            }","highlight_start":1,"highlight_end":46},{"text":"                                        }","highlight_start":1,"highlight_end":42},{"text":"                                    }","highlight_start":1,"highlight_end":38},{"text":"                                    #[cfg(not(feature = \"partitioning\"))]","highlight_start":1,"highlight_end":74},{"text":"                                    {","highlight_start":1,"highlight_end":38},{"text":"                                        synapse.receive_spike(&spike)?;","highlight_start":1,"highlight_end":72},{"text":"                                        if self.plastic_enable {","highlight_start":1,"highlight_end":65},{"text":"                                            // Update pre-synaptic trace on spike","highlight_start":1,"highlight_end":82},{"text":"                                            let pre_idx = spike.source as usize;","highlight_start":1,"highlight_end":81},{"text":"                                            if pre_idx < self.pre_trace.len() {","highlight_start":1,"highlight_end":80},{"text":"                                                self.pre_trace[pre_idx] = self.pre_trace[pre_idx] + T::one();","highlight_start":1,"highlight_end":110},{"text":"                                            }","highlight_start":1,"highlight_end":46},{"text":"                                            // Apply STDP: find synapse index and update weight","highlight_start":1,"highlight_end":96},{"text":"                                            for (syn_idx, syn) in self.synapses.iter().enumerate() {","highlight_start":1,"highlight_end":101},{"text":"                                                if syn.pre_id == spike.source && syn.post_id == synapse.post_id {","highlight_start":1,"highlight_end":114},{"text":"                                                    self.apply_stdp(spike.source, synapse.post_id, syn_idx);","highlight_start":1,"highlight_end":109},{"text":"                                                    break;","highlight_start":1,"highlight_end":59},{"text":"                                                }","highlight_start":1,"highlight_end":50},{"text":"                                            }","highlight_start":1,"highlight_end":46},{"text":"                                        }","highlight_start":1,"highlight_end":42},{"text":"                                        let _ = self.active_list.push_back(synapse.post_id);","highlight_start":1,"highlight_end":93},{"text":"                                    }","highlight_start":1,"highlight_end":38},{"text":"                                }","highlight_start":1,"highlight_end":34},{"text":"                            }","highlight_start":1,"highlight_end":30}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"desugaring of `for` loop","def_site_span":{"file_name":"crates/shnn-embedded/src/lib.rs","byte_start":0,"byte_end":0,"line_start":1,"line_end":1,"column_start":1,"column_end":1,"is_primary":false,"text":[],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}}],"children":[],"rendered":"\u001b[1m\u001b[91merror[E0502]\u001b[0m\u001b[1m: cannot borrow `self.synapses` as immutable because it is also borrowed as mutable\u001b[0m\n   \u001b[1m\u001b[94m--> \u001b[0mcrates/shnn-embedded/src/embedded_network.rs:458:67\n    \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[94m397\u001b[0m \u001b[1m\u001b[94m|\u001b[0m \u001b[1m\u001b[94m...\u001b[0m                   for synapse in &mut self.synapses {\n    \u001b[1m\u001b[94m|\u001b[0m                                      \u001b[1m\u001b[94m------------------\u001b[0m\n    \u001b[1m\u001b[94m|\u001b[0m                                      \u001b[1m\u001b[94m|\u001b[0m\n    \u001b[1m\u001b[94m|\u001b[0m                                      \u001b[1m\u001b[94mmutable borrow occurs here\u001b[0m\n    \u001b[1m\u001b[94m|\u001b[0m                                      \u001b[1m\u001b[94mmutable borrow later used here\u001b[0m\n\u001b[1m\u001b[94m...\u001b[0m\n\u001b[1m\u001b[94m458\u001b[0m \u001b[1m\u001b[94m|\u001b[0m \u001b[1m\u001b[94m...\u001b[0m                                   for (syn_idx, syn) in self.synapses.iter().enumerate() {\n    \u001b[1m\u001b[94m|\u001b[0m                                                             \u001b[1m\u001b[91m^^^^^^^^^^^^^\u001b[0m \u001b[1m\u001b[91mimmutable borrow occurs here\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"cannot borrow `*self` as mutable more than once at a time","code":{"code":"E0499","explanation":"A variable was borrowed as mutable more than once.\n\nErroneous code example:\n\n```compile_fail,E0499\nlet mut i = 0;\nlet mut x = &mut i;\nlet mut a = &mut i;\nx;\n// error: cannot borrow `i` as mutable more than once at a time\n```\n\nPlease note that in Rust, you can either have many immutable references, or one\nmutable reference. For more details you may want to read the\n[References & Borrowing][references-and-borrowing] section of the Book.\n\n[references-and-borrowing]: https://doc.rust-lang.org/book/ch04-02-references-and-borrowing.html\n\nExample:\n\n```\nlet mut i = 0;\nlet mut x = &mut i; // ok!\n\n// or:\nlet mut i = 0;\nlet a = &i; // ok!\nlet b = &i; // still ok!\nlet c = &i; // still ok!\nb;\na;\n```\n"},"level":"error","spans":[{"file_name":"crates/shnn-embedded/src/embedded_network.rs","byte_start":14913,"byte_end":14931,"line_start":397,"line_end":397,"column_start":44,"column_end":62,"is_primary":false,"text":[{"text":"                            for synapse in &mut self.synapses {","highlight_start":44,"highlight_end":62}],"label":"first mutable borrow occurs here","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"crates/shnn-embedded/src/embedded_network.rs","byte_start":19920,"byte_end":19924,"line_start":460,"line_end":460,"column_start":53,"column_end":57,"is_primary":true,"text":[{"text":"                                                    self.apply_stdp(spike.source, synapse.post_id, syn_idx);","highlight_start":53,"highlight_end":57}],"label":"second mutable borrow occurs here","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"crates/shnn-embedded/src/embedded_network.rs","byte_start":14913,"byte_end":14931,"line_start":397,"line_end":397,"column_start":44,"column_end":62,"is_primary":false,"text":[{"text":"                            for synapse in &mut self.synapses {","highlight_start":44,"highlight_end":62}],"label":"first borrow later used here","suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"crates/shnn-embedded/src/embedded_network.rs","byte_start":14898,"byte_end":20368,"line_start":397,"line_end":468,"column_start":29,"column_end":30,"is_primary":false,"text":[{"text":"                            for synapse in &mut self.synapses {","highlight_start":29,"highlight_end":64},{"text":"                                if synapse.pre_id == spike.source {","highlight_start":1,"highlight_end":68},{"text":"                                    #[cfg(feature = \"partitioning\")]","highlight_start":1,"highlight_end":69},{"text":"                                    {","highlight_start":1,"highlight_end":38},{"text":"                                        let pid_pre = self.partition_map.get(spike.source);","highlight_start":1,"highlight_end":92},{"text":"                                        let pid_post = self.partition_map.get(synapse.post_id);","highlight_start":1,"highlight_end":96},{"text":"                                        match (pid_pre, pid_post) {","highlight_start":1,"highlight_end":68},{"text":"                                            // Same-partition: deliver immediately","highlight_start":1,"highlight_end":83},{"text":"                                            (Some(a), Some(b)) if a == b => {","highlight_start":1,"highlight_end":78},{"text":"                                                synapse.receive_spike(&spike)?;","highlight_start":1,"highlight_end":80},{"text":"                                                if self.plastic_enable {","highlight_start":1,"highlight_end":73},{"text":"                                                    // Update pre-synaptic trace on spike","highlight_start":1,"highlight_end":90},{"text":"                                                    let pre_idx = spike.source as usize;","highlight_start":1,"highlight_end":89},{"text":"                                                    if pre_idx < self.pre_trace.len() {","highlight_start":1,"highlight_end":88},{"text":"                                                        self.pre_trace[pre_idx] = self.pre_trace[pre_idx] + T::one();","highlight_start":1,"highlight_end":118},{"text":"                                                    }","highlight_start":1,"highlight_end":54},{"text":"                                                    // Apply STDP: find synapse index and update weight","highlight_start":1,"highlight_end":104},{"text":"                                                    for (syn_idx, syn) in self.synapses.iter().enumerate() {","highlight_start":1,"highlight_end":109},{"text":"                                                        if syn.pre_id == spike.source && syn.post_id == synapse.post_id {","highlight_start":1,"highlight_end":122},{"text":"                                                            self.apply_stdp(spike.source, synapse.post_id, syn_idx);","highlight_start":1,"highlight_end":117},{"text":"                                                            break;","highlight_start":1,"highlight_end":67},{"text":"                                                        }","highlight_start":1,"highlight_end":58},{"text":"                                                    }","highlight_start":1,"highlight_end":54},{"text":"                                                }","highlight_start":1,"highlight_end":50},{"text":"                                                let _ = self.active_list.push_back(synapse.post_id);","highlight_start":1,"highlight_end":101},{"text":"                                            }","highlight_start":1,"highlight_end":46},{"text":"                                            // Cross-partition: defer by enqueuing into destination partition","highlight_start":1,"highlight_end":110},{"text":"                                            (.., Some(dst)) => {","highlight_start":1,"highlight_end":65},{"text":"                                                let _ = self.partition_spikes.push(dst, spike);","highlight_start":1,"highlight_end":96},{"text":"                                            }","highlight_start":1,"highlight_end":46},{"text":"                                            // Unknown mapping: fallback to immediate delivery","highlight_start":1,"highlight_end":95},{"text":"                                            _ => {","highlight_start":1,"highlight_end":51},{"text":"                                                synapse.receive_spike(&spike)?;","highlight_start":1,"highlight_end":80},{"text":"                                                if self.plastic_enable {","highlight_start":1,"highlight_end":73},{"text":"                                                    // Update pre-synaptic trace on spike","highlight_start":1,"highlight_end":90},{"text":"                                                    let pre_idx = spike.source as usize;","highlight_start":1,"highlight_end":89},{"text":"                                                    if pre_idx < self.pre_trace.len() {","highlight_start":1,"highlight_end":88},{"text":"                                                        self.pre_trace[pre_idx] = self.pre_trace[pre_idx] + T::one();","highlight_start":1,"highlight_end":118},{"text":"                                                    }","highlight_start":1,"highlight_end":54},{"text":"                                                    // Apply STDP: find synapse index and update weight","highlight_start":1,"highlight_end":104},{"text":"                                                    for (syn_idx, syn) in self.synapses.iter().enumerate() {","highlight_start":1,"highlight_end":109},{"text":"                                                        if syn.pre_id == spike.source && syn.post_id == synapse.post_id {","highlight_start":1,"highlight_end":122},{"text":"                                                            self.apply_stdp(spike.source, synapse.post_id, syn_idx);","highlight_start":1,"highlight_end":117},{"text":"                                                            break;","highlight_start":1,"highlight_end":67},{"text":"                                                        }","highlight_start":1,"highlight_end":58},{"text":"                                                    }","highlight_start":1,"highlight_end":54},{"text":"                                                }","highlight_start":1,"highlight_end":50},{"text":"                                                let _ = self.active_list.push_back(synapse.post_id);","highlight_start":1,"highlight_end":101},{"text":"                                            }","highlight_start":1,"highlight_end":46},{"text":"                                        }","highlight_start":1,"highlight_end":42},{"text":"                                    }","highlight_start":1,"highlight_end":38},{"text":"                                    #[cfg(not(feature = \"partitioning\"))]","highlight_start":1,"highlight_end":74},{"text":"                                    {","highlight_start":1,"highlight_end":38},{"text":"                                        synapse.receive_spike(&spike)?;","highlight_start":1,"highlight_end":72},{"text":"                                        if self.plastic_enable {","highlight_start":1,"highlight_end":65},{"text":"                                            // Update pre-synaptic trace on spike","highlight_start":1,"highlight_end":82},{"text":"                                            let pre_idx = spike.source as usize;","highlight_start":1,"highlight_end":81},{"text":"                                            if pre_idx < self.pre_trace.len() {","highlight_start":1,"highlight_end":80},{"text":"                                                self.pre_trace[pre_idx] = self.pre_trace[pre_idx] + T::one();","highlight_start":1,"highlight_end":110},{"text":"                                            }","highlight_start":1,"highlight_end":46},{"text":"                                            // Apply STDP: find synapse index and update weight","highlight_start":1,"highlight_end":96},{"text":"                                            for (syn_idx, syn) in self.synapses.iter().enumerate() {","highlight_start":1,"highlight_end":101},{"text":"                                                if syn.pre_id == spike.source && syn.post_id == synapse.post_id {","highlight_start":1,"highlight_end":114},{"text":"                                                    self.apply_stdp(spike.source, synapse.post_id, syn_idx);","highlight_start":1,"highlight_end":109},{"text":"                                                    break;","highlight_start":1,"highlight_end":59},{"text":"                                                }","highlight_start":1,"highlight_end":50},{"text":"                                            }","highlight_start":1,"highlight_end":46},{"text":"                                        }","highlight_start":1,"highlight_end":42},{"text":"                                        let _ = self.active_list.push_back(synapse.post_id);","highlight_start":1,"highlight_end":93},{"text":"                                    }","highlight_start":1,"highlight_end":38},{"text":"                                }","highlight_start":1,"highlight_end":34},{"text":"                            }","highlight_start":1,"highlight_end":30}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"desugaring of `for` loop","def_site_span":{"file_name":"crates/shnn-embedded/src/lib.rs","byte_start":0,"byte_end":0,"line_start":1,"line_end":1,"column_start":1,"column_end":1,"is_primary":false,"text":[],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}}],"children":[],"rendered":"\u001b[1m\u001b[91merror[E0499]\u001b[0m\u001b[1m: cannot borrow `*self` as mutable more than once at a time\u001b[0m\n   \u001b[1m\u001b[94m--> \u001b[0mcrates/shnn-embedded/src/embedded_network.rs:460:53\n    \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[94m397\u001b[0m \u001b[1m\u001b[94m|\u001b[0m \u001b[1m\u001b[94m...\u001b[0m   for synapse in &mut self.synapses {\n    \u001b[1m\u001b[94m|\u001b[0m                      \u001b[1m\u001b[94m------------------\u001b[0m\n    \u001b[1m\u001b[94m|\u001b[0m                      \u001b[1m\u001b[94m|\u001b[0m\n    \u001b[1m\u001b[94m|\u001b[0m                      \u001b[1m\u001b[94mfirst mutable borrow occurs here\u001b[0m\n    \u001b[1m\u001b[94m|\u001b[0m                      \u001b[1m\u001b[94mfirst borrow later used here\u001b[0m\n\u001b[1m\u001b[94m...\u001b[0m\n\u001b[1m\u001b[94m460\u001b[0m \u001b[1m\u001b[94m|\u001b[0m \u001b[1m\u001b[94m...\u001b[0m                           self.apply_stdp(spike.source, synapse.post_id, syn_idx);\n    \u001b[1m\u001b[94m|\u001b[0m                               \u001b[1m\u001b[91m^^^^\u001b[0m \u001b[1m\u001b[91msecond mutable borrow occurs here\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"variable does not need to be mutable","code":{"code":"unused_mut","explanation":null},"level":"warning","spans":[{"file_name":"crates/shnn-embedded/src/embedded_network.rs","byte_start":26567,"byte_end":26581,"line_start":634,"line_end":634,"column_start":13,"column_end":27,"is_primary":true,"text":[{"text":"        let mut new_spikes = self.process_active_budget(","highlight_start":13,"highlight_end":27}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}],"children":[{"message":"`#[warn(unused_mut)]` (part of `#[warn(unused)]`) on by default","code":null,"level":"note","spans":[],"children":[],"rendered":null},{"message":"remove this `mut`","code":null,"level":"help","spans":[{"file_name":"crates/shnn-embedded/src/embedded_network.rs","byte_start":26567,"byte_end":26571,"line_start":634,"line_end":634,"column_start":13,"column_end":17,"is_primary":true,"text":[{"text":"        let mut new_spikes = self.process_active_budget(","highlight_start":13,"highlight_end":17}],"label":null,"suggested_replacement":"","suggestion_applicability":"MachineApplicable","expansion":null}],"children":[],"rendered":null}],"rendered":"\u001b[1m\u001b[33mwarning\u001b[0m\u001b[1m: variable does not need to be mutable\u001b[0m\n   \u001b[1m\u001b[94m--> \u001b[0mcrates/shnn-embedded/src/embedded_network.rs:634:13\n    \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[94m634\u001b[0m \u001b[1m\u001b[94m|\u001b[0m         let mut new_spikes = self.process_active_budget(\n    \u001b[1m\u001b[94m|\u001b[0m             \u001b[1m\u001b[94m----\u001b[0m\u001b[1m\u001b[33m^^^^^^^^^^\u001b[0m\n    \u001b[1m\u001b[94m|\u001b[0m             \u001b[1m\u001b[94m|\u001b[0m\n    \u001b[1m\u001b[94m|\u001b[0m             \u001b[1m\u001b[94mhelp: remove this `mut`\u001b[0m\n    \u001b[1m\u001b[94m|\u001b[0m\n    \u001b[1m\u001b[94m= \u001b[0m\u001b[1mnote\u001b[0m: `#[warn(unused_mut)]` (part of `#[warn(unused)]`) on by default\n\n"}
{"$message_type":"diagnostic","message":"aborting due to 2 previous errors; 8 warnings emitted","code":null,"level":"error","spans":[],"children":[],"rendered":"\u001b[1m\u001b[91merror\u001b[0m\u001b[1m: aborting due to 2 previous errors; 8 warnings emitted\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"Some errors have detailed explanations: E0499, E0502.","code":null,"level":"failure-note","spans":[],"children":[],"rendered":"\u001b[1mSome errors have detailed explanations: E0499, E0502.\u001b[0m\n"}
{"$message_type":"diagnostic","message":"For more information about an error, try `rustc --explain E0499`.","code":null,"level":"failure-note","spans":[],"children":[],"rendered":"\u001b[1mFor more information about an error, try `rustc --explain E0499`.\u001b[0m\n"}
